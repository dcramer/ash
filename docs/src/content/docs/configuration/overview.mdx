---
title: Configuration Overview
description: Configure Ash with TOML configuration files
sidebar:
  order: 1
---

import { Aside } from '@astrojs/starlight/components';

Ash uses TOML configuration files to define models, providers, and behavior.

## Configuration File Location

Ash looks for configuration in this order:

1. `./config.toml` (current directory)
2. `~/.ash/config.toml` (user home)
3. `/etc/ash/config.toml` (system-wide)

Run `ash setup` to create your configuration interactively.

## Full Example Configuration

```toml
# Workspace directory for SOUL.md and USER.md
workspace = "~/.ash/workspace"

# LLM Provider API Keys
[anthropic]
api_key = "sk-ant-..."  # Or use ANTHROPIC_API_KEY env var

[openai]
api_key = "sk-..."  # Or use OPENAI_API_KEY env var

# Named model configurations (Haiku for fast/cheap, Sonnet for complex tasks)
[models.default]
provider = "anthropic"
model = "claude-haiku-4-5-20251001"
temperature = 0.7
max_tokens = 4096

[models.sonnet]
provider = "anthropic"
model = "claude-sonnet-4-5-20250929"
max_tokens = 8192

# Override model for specific skills that need more reasoning power
[skills.debug]
model = "sonnet"

[skills.code-review]
model = "sonnet"

# Telegram bot integration
[telegram]
bot_token = "123456:ABC..."  # Or use TELEGRAM_BOT_TOKEN env var
allowed_users = ["@yourusername", "123456789"]
allowed_groups = []
group_mode = "mention"

# Docker sandbox settings
[sandbox]
image = "ash-sandbox:latest"
timeout = 60
memory_limit = "512m"
cpu_limit = 1.0
runtime = "runc"
network_mode = "bridge"
workspace_access = "rw"

# HTTP server settings
[server]
host = "127.0.0.1"
port = 8080
webhook_path = "/webhook"

# Memory and context settings
[memory]
database_path = "~/.ash/memory.db"
max_context_messages = 20
context_token_budget = 100000
recency_window = 10
system_prompt_buffer = 8000

# Embeddings for semantic search
[embeddings]
provider = "openai"
model = "text-embedding-3-small"

# Web search integration
[brave_search]
api_key = "..."  # Or use BRAVE_SEARCH_API_KEY env var

# Error tracking (optional)
[sentry]
dsn = "https://..."  # Or use SENTRY_DSN env var
environment = "production"
traces_sample_rate = 0.1

# Per-skill configuration
[skills.weather]
api_key = "your-weather-api-key"
units = "metric"
```

## Environment Variables

API keys can be set via environment variables instead of the config file:

| Variable | Config Path |
|----------|-------------|
| `ANTHROPIC_API_KEY` | `[anthropic].api_key` |
| `OPENAI_API_KEY` | `[openai].api_key` |
| `TELEGRAM_BOT_TOKEN` | `[telegram].bot_token` |
| `BRAVE_SEARCH_API_KEY` | `[brave_search].api_key` |
| `SENTRY_DSN` | `[sentry].dsn` |

Environment variables take precedence over config file values.

## Minimal Configuration

The minimum required configuration:

```toml
[models.default]
provider = "anthropic"
model = "claude-haiku-4-5-20251001"
```

With `ANTHROPIC_API_KEY` set in your environment.

For a better experience, add a "sonnet" alias for complex tasks:

```toml
[models.default]
provider = "anthropic"
model = "claude-haiku-4-5-20251001"

[models.sonnet]
provider = "anthropic"
model = "claude-sonnet-4-5-20250929"
```

## Configuration Commands

View current configuration:

```bash
ash config show
```

Validate configuration:

```bash
ash config validate
```

Run interactive setup:

```bash
ash setup
```

Reconfigure a specific section:

```bash
ash setup --section models
```

## Configuration Sections

| Section | Purpose | Documentation |
|---------|---------|---------------|
| `[models.*]` | LLM model definitions | [Models](../models/) |
| `[telegram]` | Telegram bot settings | [Telegram](../telegram/) |
| `[sandbox]` | Docker sandbox settings | [Sandbox](../sandbox/) |
| `[server]` | HTTP server settings | [Server](../server/) |
| `[memory]` | Memory and context | [Memory](../memory/) |
| `[embeddings]` | Semantic search | [Embeddings](../embeddings/) |
| `[brave_search]` | Web search | [Brave Search](../brave-search/) |
| `[sentry]` | Error tracking | [Sentry](../sentry/) |
| `[skills.*]` | Per-skill config | [Skills](../skills/) |

<Aside type="tip">
  Use `ash setup` to configure each section interactively with validation.
</Aside>
