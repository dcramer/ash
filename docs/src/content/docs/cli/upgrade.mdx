---
title: ash upgrade
description: Run migrations and verify sandbox
sidebar:
  order: 18
---

Run all necessary setup and upgrade tasks.

## Usage

```bash
uv run ash upgrade
```

## What It Does

1. **Migrates schedule data into graph storage** - Imports legacy `~/.ash/schedule.jsonl` entries into `~/.ash/graph/schedules.jsonl`, writes schedule edges, and removes the legacy file
2. **Verifies sandbox** - Checks sandbox image is built and working

## When to Run

Run after:
- Installing Ash
- Updating to a new version
- Changing configuration

## Examples

After installation:

```bash
uv run ash upgrade
```

After updating:

```bash
git pull
uv sync
uv run ash upgrade
```

## Output

```
Running database migrations...
✓ Database up to date
Verifying sandbox...
✓ Sandbox ready
```

## Troubleshooting

If migrations fail, check:

```bash
uv run ash db status
```

If sandbox verification fails, rebuild:

```bash
uv run ash sandbox build
uv run ash sandbox status
```
