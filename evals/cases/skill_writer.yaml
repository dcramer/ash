name: Skill Writer Behavior
description: End-to-end tests for skill-writer phase compliance and artifact quality

cases:
  # End-to-end: instruction-only skill
  - id: e2e_instruction_skill
    description: Full flow for instruction-only skill
    prompt: "Create a skill for reviewing Python code for security issues"
    expected_behavior: |
      Complete 3-phase flow:
      1. Research: Find Python security best practices
      2. Plan: Design instruction-only skill (no scripts needed)
      3. Implement: Create SKILL.md with security review guidelines
      4. Validate: ash-sb skill validate passes
    criteria:
      - Completes all 3 phases
      - No bash/writes during research and plan
      - Creates instruction-only skill (no .py files)
      - Validation passes
    phase_constraints:
      research:
        forbidden_tools:
          - bash
          - write_file
      plan:
        forbidden_tools:
          - bash
          - write_file
    tags:
      - e2e
      - instruction_only

  # End-to-end: Python skill
  - id: e2e_python_skill
    description: Full flow for Python-based skill
    prompt: "Create a skill that fetches a URL and summarizes the content"
    expected_behavior: |
      Complete 3-phase flow:
      1. Research: Find web fetching libraries (httpx, beautifulsoup)
      2. Plan: Design Python script + SKILL.md
      3. Implement: Create fetch.py and SKILL.md
      4. Validate and test
    criteria:
      - Completes all 3 phases
      - No bash/writes during research and plan
      - Creates .py script with PEP 723 dependencies
      - SKILL.md references the script correctly
      - Validation passes
    tags:
      - e2e
      - python_skill
