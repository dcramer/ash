name: Subagent Output Quality
description: Tests checkpoint formatting and subagent voice consistency

cases:
  # Checkpoint formatting tests
  - id: checkpoint_prompt_clarity
    description: Checkpoint should display clean prompt without boilerplate headers
    prompt: "Use skill_writer to create a simple greeting skill"
    expected_behavior: |
      When the skill_writer agent pauses for input, the message should:
      1. Clearly explain what the agent is asking
      2. NOT include generic headers like "Agent paused for input"
      3. Present the actual question/prompt directly
      4. Feel natural and conversational
    criteria:
      - Message explains what input is needed
      - No generic "paused" or "waiting" boilerplate
      - Prompt reads naturally as a question to the user
      - Options are actionable and clear
    expected_tools:
      - use_agent
    tags:
      - checkpoint
      - formatting

  # Subagent voice tests
  - id: subagent_voice_consistency
    description: Subagent interrupt prompts should have personality
    prompt: "Use skill_writer to create a weather lookup skill"
    expected_behavior: |
      The skill_writer's checkpoint prompts should:
      1. Match the main agent's communication style
      2. Feel conversational, not robotic
      3. Use natural language appropriate for the configured SOUL
      4. NOT be dry/clinical technical messages
    criteria:
      - Checkpoint prompt has personality/warmth
      - Language matches expected communication style
      - Not robotic or overly formal
      - Feels like same "voice" as main agent
    expected_tools:
      - use_agent
    tags:
      - subagent
      - voice
      - personality

  - id: technical_output_neutral
    description: Technical outputs should remain neutral (no personality injection)
    prompt: "Use skill_writer to create a simple math skill that adds two numbers"
    expected_behavior: |
      The skill_writer should:
      1. Create properly formatted skill files
      2. NOT inject personality into code/YAML content
      3. Keep technical artifacts clean and professional
      4. Only apply voice to user-facing messages
    criteria:
      - Generated skill YAML is properly formatted
      - Code content is neutral/professional
      - No catchphrases or personality in file content
      - Technical quality maintained
    expected_tools:
      - use_agent
      - write_file
    tags:
      - subagent
      - technical
      - files
